<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace命名空间，作用就是对sql进行分类化管理-->
<mapper namespace="com.Tinybees.mapper.admin.AdminDAO">
    <select id="selectAdminByName" resultType="Admin" parameterType="Admin">
        SELECT * FROM admin WHERE ad_name=#{ad_name} AND ad_password=#{ad_password};
    </select>


    <!--*****************************一级分类********************************-->
    <select id="getAllCategory" resultType="Category">
        SELECT * FROM category;
    </select>

    <select id="getCategoryById" resultType="Category">
        SELECT * FROM category WHERE c_id=#{category};
    </select>

    <select id="getCategoryByName" resultType="Category">
        SELECT * FROM category WHERE c_name=#{category};
    </select>
    <!--*********************************************************************-->


    <!--******************************二级分类*******************************-->
    <select id="getAllCategorySecond" resultType="Category_second">
        SELECT * FROM category_second;
    </select>

    <select id="getCategorySecondById" resultType="Category_second">
        SELECT * FROM category_second WHERE cs_id=#{category_second}
    </select>

    <select id="getCategorySecondByName" resultType="Category_second">
        SELECT * FROM category_second WHERE cs_name=#{category_second};
    </select>

    <select id="getAllCategorySecondById" resultType="Category_second">
        SELECT * FROM category_second,category
        WHERE category_second.c_id=#{categories} GROUP BY category_second.cs_name;
    </select>
    <!--**********************************************************************-->


    <!--*******************************三级分类*******************************-->
    <select id="getAllCategoryThird" resultType="Category_third">
        SELECT * FROM category_third;
    </select>

    <select id="getAllCategoryThirdById" resultType="Category_third">
        SELECT * FROM category_third,category_second
        WHERE
        category_third.cs_id=#{category_seconds} GROUP BY category_third.ct_name;
    </select>

    <select id="getCategoryThirdByName" resultType="Category_third">
        SELECT * FROM category_third WHERE ct_name =#{category_third};
    </select>

    <select id="getCategoryThirdById" resultType="Category_third">
        SELECT * FROM category_third WHERE ct_id=#{category_third};
    </select>
    <!--***********************************************************************-->

    <!--商品操作-->
    <insert id="addProduct" parameterType="Product">
        INSERT INTO product(p_name,market_price,current_price,pdesc,image,image1,image2,image3,color,size,ct_id)
        VALUES (#{p_name},#{market_price},#{current_price},#{pdesc},#{image},#{image1},#{image2},#{image3},#{color},#{size},#{ct_id});
    </insert>

    <select id="getAllProduct" resultType="Product">
        SELECT * FROM product;
    </select>

    <delete id="deleteProductById" parameterType="Product">
        DELETE FROM product WHERE p_id=#{p_id};
    </delete>

    <!--*******************************分类添加********************************-->
    <!--添加一级分类-->
    <insert id="add_category" parameterType="Category">
        INSERT INTO category (c_name) VALUES (#{c_name});
    </insert>

    <!--添加二级分类-->
    <insert id="add_category_second">
        INSERT INTO  category_second(cs_name,c_id)VALUES (#{category_second.cs_name},#{category});
    </insert>

    <!--添加三级分类-->
    <insert id="add_category_third">
        INSERT INTO category_third(ct_name,cs_id)VALUES (#{category_third.ct_name},#{category_second});
    </insert>

</mapper>
